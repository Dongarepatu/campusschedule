<!-- timetable/templates/timetable/download_options.html -->
{% extends 'timetable/base.html' %}
{% block content %}

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <!-- Header -->
            <div class="text-center mb-5 fade-in">
                <h1 class="fw-bold header-gradient mb-3">
                    <i class="fas fa-download me-2"></i>Download Timetable
                </h1>
                <div class="card modern-card">
                    <div class="card-body text-center">
                        <h4 class="text-purple mb-2">{{ department.name }}</h4>
                        <h5 class="text-emerald">{{ selected_semester }}</h5>
                        <p class="text-muted mb-0">Choose your preferred format below</p>
                        {% if not has_entries %}
                        <div class="alert alert-warning mt-3 mb-0">
                            <i class="fas fa-exclamation-triangle me-2"></i>
                            No timetable entries found for this semester. Add entries first to download.
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Download Options -->
            <div class="row g-4">
                <!-- PDF Card -->
                <div class="col-md-6 col-lg-4">
                    <div class="card modern-card h-100 hover-lift {% if not has_entries %}disabled-card{% endif %}">
                        <div class="card-body text-center p-4">
                            <div class="icon-circle bg-danger-gradient mb-4 mx-auto">
                                <i class="fas fa-file-pdf fa-3x text-white"></i>
                            </div>
                            <h4 class="fw-bold mb-3">PDF Format</h4>
                            <p class="text-muted mb-4">
                                High-quality printable document with proper formatting, 
                                ideal for printing and official use.
                            </p>
                            <div class="d-grid gap-2">
                                {% if has_entries %}
                                <a href="{% url 'download_timetable_pdf' department.id %}?semester={{ selected_semester }}" 
                                   class="btn btn-gradient-danger btn-lg">
                                    <i class="fas fa-download me-2"></i>Download PDF
                                </a>
                                {% else %}
                                <button class="btn btn-gradient-danger btn-lg" disabled>
                                    <i class="fas fa-ban me-2"></i>No Data Available
                                </button>
                                {% endif %}
                                <small class="text-muted">Best for printing</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Excel Card -->
                <div class="col-md-6 col-lg-4">
                    <div class="card modern-card h-100 hover-lift {% if not has_entries %}disabled-card{% endif %}">
                        <div class="card-body text-center p-4">
                            <div class="icon-circle bg-success-gradient mb-4 mx-auto">
                                <i class="fas fa-file-excel fa-3x text-white"></i>
                            </div>
                            <h4 class="fw-bold mb-3">Excel Format</h4>
                            <p class="text-muted mb-4">
                                Spreadsheet format with proper columns and formatting, 
                                ideal for data analysis and editing.
                            </p>
                            <div class="d-grid gap-2">
                                {% if has_entries %}
                                <a href="{% url 'download_timetable_excel' department.id %}?semester={{ selected_semester }}" 
                                   class="btn btn-gradient-emerald btn-lg">
                                    <i class="fas fa-download me-2"></i>Download Excel
                                </a>
                                {% else %}
                                <button class="btn btn-gradient-emerald btn-lg" disabled>
                                    <i class="fas fa-ban me-2"></i>No Data Available
                                </button>
                                {% endif %}
                                <small class="text-muted">Best for editing</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- PNG Image Card -->
                <div class="col-md-6 col-lg-4">
                    <div class="card modern-card h-100 hover-lift {% if not has_entries %}disabled-card{% endif %}">
                        <div class="card-body text-center p-4">
                            <div class="icon-circle bg-primary-gradient mb-4 mx-auto">
                                <i class="fas fa-file-image fa-3x text-white"></i>
                            </div>
                            <h4 class="fw-bold mb-3">Image Format</h4>
                            <p class="text-muted mb-4">
                                High-quality PNG image suitable for sharing on 
                                social media, WhatsApp, or printing.
                            </p>
                            <div class="d-grid gap-2">
                                {% if has_entries %}
                                <a href="{% url 'download_timetable_image' department.id %}?semester={{ selected_semester }}"
                                   class="btn btn-gradient-primary btn-lg">
                                    <i class="fas fa-download me-2"></i>Download PNG
                                </a>
                                {% else %}
                                <button class="btn btn-gradient-primary btn-lg" disabled>
                                    <i class="fas fa-ban me-2"></i>No Data Available
                                </button>
                                {% endif %}
                                <small class="text-muted">Best for sharing</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Word Card -->
                <div class="col-md-6 col-lg-4">
                    <div class="card modern-card h-100 hover-lift {% if not has_entries %}disabled-card{% endif %}">
                        <div class="card-body text-center p-4">
                            <div class="icon-circle bg-info-gradient mb-4 mx-auto">
                                <i class="fas fa-file-word fa-3x text-white"></i>
                            </div>
                            <h4 class="fw-bold mb-3">Word Format</h4>
                            <p class="text-muted mb-4">
                                Editable document format perfect for making last-minute changes
                                and collaborative editing.
                            </p>
                            <div class="d-grid gap-2">
                                {% if has_entries %}
                                <a href="{% url 'download_timetable_word' department.id %}?semester={{ selected_semester }}" 
                                   class="btn btn-gradient-slate btn-lg">
                                    <i class="fas fa-download me-2"></i>Download Word
                                </a>
                                {% else %}
                                <button class="btn btn-gradient-slate btn-lg" disabled>
                                    <i class="fas fa-ban me-2"></i>No Data Available
                                </button>
                                {% endif %}
                                <small class="text-muted">Best for collaboration</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- CSV Card -->
                <div class="col-md-6 col-lg-4">
                    <div class="card modern-card h-100 hover-lift {% if not has_entries %}disabled-card{% endif %}">
                        <div class="card-body text-center p-4">
                            <div class="icon-circle bg-warning-gradient mb-4 mx-auto">
                                <i class="fas fa-file-csv fa-3x text-white"></i>
                            </div>
                            <h4 class="fw-bold mb-3">CSV Format</h4>
                            <p class="text-muted mb-4">
                                Comma-separated values, lightweight format compatible 
                                with all spreadsheet and database software.
                            </p>
                            <div class="d-grid gap-2">
                                {% if has_entries %}
                                <a href="{% url 'download_timetable_csv' department.id %}?semester={{ selected_semester }}" 
                                   class="btn btn-gradient-warning btn-lg">
                                    <i class="fas fa-download me-2"></i>Download CSV
                                </a>
                                {% else %}
                                <button class="btn btn-gradient-warning btn-lg" disabled>
                                    <i class="fas fa-ban me-2"></i>No Data Available
                                </button>
                                {% endif %}
                                <small class="text-muted">Best for databases</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- JSON Card -->
                <div class="col-md-6 col-lg-4">
                    <div class="card modern-card h-100 hover-lift {% if not has_entries %}disabled-card{% endif %}">
                        <div class="card-body text-center p-4">
                            <div class="icon-circle bg-purple-gradient mb-4 mx-auto">
                                <i class="fas fa-file-code fa-3x text-white"></i>
                            </div>
                            <h4 class="fw-bold mb-3">JSON Format</h4>
                            <p class="text-muted mb-4">
                                Structured data format ideal for developers, 
                                APIs, and integration with other applications.
                            </p>
                            <div class="d-grid gap-2">
                                {% if has_entries %}
                                <a href="{% url 'download_timetable_json' department.id %}?semester={{ selected_semester }}" 
                                   class="btn btn-gradient-purple btn-lg">
                                    <i class="fas fa-download me-2"></i>Download JSON
                                </a>
                                {% else %}
                                <button class="btn btn-gradient-purple btn-lg" disabled>
                                    <i class="fas fa-ban me-2"></i>No Data Available
                                </button>
                                {% endif %}
                                <small class="text-muted">Best for developers</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="text-center mt-5">
                <div class="btn-group">
                    <a href="{% url 'timetable_view' department.id %}?semester={{ selected_semester }}" 
                       class="btn btn-outline-purple">
                        <i class="fas fa-arrow-left me-2"></i>Back to Timetable
                    </a>
                    <a href="{% url 'timetable_create' %}?department={{ department.id }}&semester={{ selected_semester }}" 
                       class="btn btn-outline-emerald">
                        <i class="fas fa-plus me-2"></i>Add Entries
                    </a>
                    <a href="{% url 'dashboard' %}" 
                       class="btn btn-outline-slate">
                        <i class="fas fa-home me-2"></i>Dashboard
                    </a>
                </div>
            </div>

            <!-- Format Comparison -->
            <div class="card modern-card mt-5">
                <div class="card-header gradient-header text-white">
                    <h5 class="mb-0"><i class="fas fa-info-circle me-2"></i>Format Comparison</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-modern">
                            <thead class="table-gradient">
                                <tr>
                                    <th>Format</th>
                                    <th>Best For</th>
                                    <th>File Size</th>
                                    <th>Editable</th>
                                    <th>Print Quality</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><i class="fas fa-file-pdf text-danger me-2"></i>PDF</td>
                                    <td>Printing, Official Documents</td>
                                    <td>Medium</td>
                                    <td><i class="fas fa-times text-danger"></i></td>
                                    <td><i class="fas fa-check text-success"></i> High</td>
                                </tr>
                                <tr>
                                    <td><i class="fas fa-file-excel text-success me-2"></i>Excel</td>
                                    <td>Editing, Analysis</td>
                                    <td>Small</td>
                                    <td><i class="fas fa-check text-success"></i></td>
                                    <td><i class="fas fa-check text-success"></i> Medium</td>
                                </tr>
                                <tr>
                                    <td><i class="fas fa-file-image text-primary me-2"></i>PNG Image</td>
                                    <td>Sharing, Social Media</td>
                                    <td>Medium</td>
                                    <td><i class="fas fa-times text-danger"></i></td>
                                    <td><i class="fas fa-check text-success"></i> High</td>
                                </tr>
                                <tr>
                                    <td><i class="fas fa-file-word text-info me-2"></i>Word</td>
                                    <td>Editing, Collaboration</td>
                                    <td>Medium</td>
                                    <td><i class="fas fa-check text-success"></i></td>
                                    <td><i class="fas fa-check text-success"></i> High</td>
                                </tr>
                                <tr>
                                    <td><i class="fas fa-file-csv text-warning me-2"></i>CSV</td>
                                    <td>Databases, Importing</td>
                                    <td>Very Small</td>
                                    <td><i class="fas fa-check text-success"></i></td>
                                    <td><i class="fas fa-times text-danger"></i> Low</td>
                                </tr>
                                <tr>
                                    <td><i class="fas fa-file-code text-purple me-2"></i>JSON</td>
                                    <td>APIs, Development</td>
                                    <td>Small</td>
                                    <td><i class="fas fa-check text-success"></i></td>
                                    <td><i class="fas fa-times text-danger"></i> Low</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    /* Additional styles for download page */
    .hover-lift {
        transition: all 0.3s ease;
    }
    
    .hover-lift:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
    }
    
    .icon-circle {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
    }
    
    .bg-danger-gradient {
        background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    }
    
    .bg-success-gradient {
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    }
    
    .bg-primary-gradient {
        background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    }
    
    .bg-info-gradient {
        background: linear-gradient(135deg, #0891b2 0%, #0e7490 100%);
    }
    
    .bg-warning-gradient {
        background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    }
    
    .bg-purple-gradient {
        background: linear-gradient(135deg, #7c3aed 0%, #5b21b6 100%);
    }
    
    .btn-gradient-danger {
        background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        border: none;
        color: white;
    }
    
    .btn-gradient-emerald {
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        border: none;
        color: white;
    }
    
    .btn-gradient-primary {
        background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        border: none;
        color: white;
    }
    
    .btn-gradient-slate {
        background: linear-gradient(135deg, #64748b 0%, #475569 100%);
        border: none;
        color: white;
    }
    
    .btn-gradient-warning {
        background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        border: none;
        color: white;
    }
    
    .btn-gradient-purple {
        background: linear-gradient(135deg, #7c3aed 0%, #5b21b6 100%);
        border: none;
        color: white;
    }
    
    .btn-gradient-danger:hover,
    .btn-gradient-emerald:hover,
    .btn-gradient-primary:hover,
    .btn-gradient-slate:hover,
    .btn-gradient-warning:hover,
    .btn-gradient-purple:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        color: white;
    }
    
    .disabled-card {
        opacity: 0.6;
        cursor: not-allowed;
    }
    
    .disabled-card .hover-lift:hover {
        transform: none;
        box-shadow: none;
    }
    
    .fade-in {
        animation: fadeInUp 0.8s ease-out;
    }
    
    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
</style>

{% endblock %}